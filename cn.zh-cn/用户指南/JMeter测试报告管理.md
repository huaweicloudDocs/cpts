# JMeter测试报告管理<a name="cpts_01_0069"></a>

## 测试报告说明<a name="section599212319020"></a>

JMeter测试报告提供实时、离线两种类型的测试报告，供用户随时查看和分析测试数据。测试报告由各项指标总量、各项指标TPS、带宽、响应时间区间比例、TP最大响应时间五部分构成。

JMeter测试报告说明如[表1](#table7900194111711)所示。

本测试报告展现了测试过程中被测系统在模拟高并发用户的响应性能，为了更好的帮助您阅读测试报告，我们提供以下信息供您参考：

-   **统计维度：**本报告的TPS，响应时间、并发等统计维度均为单个线程组，如线程组中有请求多个报文，只有在多个请求报文均正常返回会认为成功，响应时间也是多个请求报文的求和值。
-   **响应超时：**出现该情况下是在设置的响应超时时间内（Jmx自定义），对应的TCP连接中没有响应数据返回，我们会将本次线程组请求统计为响应超时。出现原因一般是被测服务器繁忙、崩溃、网络带宽被占满等。
-   **校验失败：**从服务器返回的响应报文不符合预期（针对HTTP/HTTPS默认的预期响应码为200），比如服务器返回404、502等。出现原因一般为高并发情况下被测服务无法正常处理导致的，如分布式系统中数据库出现瓶颈、后端应用返回错误等。
-   **带宽统计：**本报告统计的是性能测试服务执行端的带宽，上行表示从性能测试服务发出的流量，下行表示接收到的流量。如果是外网压测场景，您需要关注执行机的EIP带宽是否可以满足上行带宽的要求。而下行带宽需要关注单台执行机是否超过1GB。
-   **TPS：**TPS是指云性能测试服务在统计周期内每秒从被测服务器获取到的响应事务实时统计，TPS=统计周期内的正常返回数/统计周期。
-   **如何判断被测应用优劣：**根据应用本身的服务质量定义，理想状态是没有任何响应失败、校验失败的情况，如果有，需要在服务质量定义范围之内，通常情况下不超过1%，同时响应时间越低越好（2s内体验较好，5s内可以接受，超过5s则需要考虑优化），TP90、TP99指标可以客观反映出90%、99%用户的体验响应时间。

**表 1**  JMeter测试报告说明

<a name="table7900194111711"></a>
<table><thead align="left"><tr id="row5901541171716"><th class="cellrowborder" valign="top" width="23%" id="mcps1.2.3.1.1"><p id="p09017415179"><a name="p09017415179"></a><a name="p09017415179"></a>概念</p>
</th>
<th class="cellrowborder" valign="top" width="77%" id="mcps1.2.3.1.2"><p id="p1090184141718"><a name="p1090184141718"></a><a name="p1090184141718"></a>解释</p>
</th>
</tr>
</thead>
<tbody><tr id="row3510335501"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.3.1.1 "><p id="p1251183317507"><a name="p1251183317507"></a><a name="p1251183317507"></a><span class="keyword" id="keyword1849311865520"><a name="keyword1849311865520"></a><a name="keyword1849311865520"></a>各项指标总量</span></p>
</td>
<td class="cellrowborder" valign="top" width="77%" headers="mcps1.2.3.1.2 "><p id="p1266119315523"><a name="p1266119315523"></a><a name="p1266119315523"></a>所有线程组各项指标总量的汇总。</p>
<a name="ul1053754816503"></a><a name="ul1053754816503"></a><ul id="ul1053754816503"><li>当前并发：当前并发操作的虚拟用户数。</li><li>正常返回：如设置了检查点，检查点通过的事务响应数，如未设置默认为返回2XX的事务响应数。</li><li>带宽：记录压测任务运行所消耗的实时带宽变化。</li><li>响应时间：<span>指从客户端发一个请求开始计时，到客户端接收到从服务器端返回的响应结果结束所经历的时间。</span></li><li>异常返回：解析失败、校验失败、响应超时、3XX、4XX、5XX、连接被拒绝的事务响应数。</li><li>平均TPS：是指云性能测试服务在统计周期内平均每秒从被测服务器获取到的响应事务统计。</li></ul>
</td>
</tr>
<tr id="row1690120411172"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.3.1.1 "><p id="p17901104116173"><a name="p17901104116173"></a><a name="p17901104116173"></a><span class="keyword" id="keyword774915204559"><a name="keyword774915204559"></a><a name="keyword774915204559"></a>各项指标TPS</span></p>
</td>
<td class="cellrowborder" valign="top" width="77%" headers="mcps1.2.3.1.2 "><p id="p1528165394916"><a name="p1528165394916"></a><a name="p1528165394916"></a>正常返回、解析失败、校验失败、响应超时的每秒处理事务数，该项指标与思考时间、并发用户、服务器响应能力均有关，比如思考时间为500ms，如果服务器对于当前用户的上个请求响应时间小于500ms，则该用户每秒请求2次。</p>
<a name="ul3291719191"></a><a name="ul3291719191"></a><ul id="ul3291719191"><li><span class="keyword" id="keyword135475346560"><a name="keyword135475346560"></a><a name="keyword135475346560"></a>TPS</span>：是指云性能测试服务在统计周期内每秒从被测服务器获取到的响应事务实时统计，TPS=统计周期内的正常返回数/统计周期。</li><li>正常返回：如设置了检查点，检查点通过的事务响应数，如未设置默认为返回2XX的事务响应数。</li><li>校验失败：如设置了检查点，检查点未通过的事务响应数，如未设置，返回不是2XX的事务响应数。</li><li>3XX：表示客户端需要采取进一步的操作才能完成请求。</li><li>4XX：表示客户端发生了错误，妨碍了服务器的处理。</li><li>5XX：表示服务器无法完成明显有效的请求。</li><li>当前并发：当前并发操作的虚拟用户数。</li></ul>
</td>
</tr>
<tr id="row10386632105118"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.3.1.1 "><p id="p13525104218516"><a name="p13525104218516"></a><a name="p13525104218516"></a><span class="keyword" id="keyword11525342105116"><a name="keyword11525342105116"></a><a name="keyword11525342105116"></a>带宽（KB/S）</span></p>
</td>
<td class="cellrowborder" valign="top" width="77%" headers="mcps1.2.3.1.2 "><div class="p" id="p768112014554"><a name="p768112014554"></a><a name="p768112014554"></a>记录压测任务运行所消耗的实时带宽变化。<a name="ul1750315569542"></a><a name="ul1750315569542"></a><ul id="ul1750315569542"><li>上行带宽：从JMeter测试执行机往外发送出去数据的速度。</li><li>下行带宽：JMeter测试执行机接收到数据的速度。</li></ul>
</div>
</td>
</tr>
<tr id="row19903841121710"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.3.1.1 "><p id="p189031141131710"><a name="p189031141131710"></a><a name="p189031141131710"></a><span class="keyword" id="keyword137087232554"><a name="keyword137087232554"></a><a name="keyword137087232554"></a>响应时间区间比例</span></p>
</td>
<td class="cellrowborder" valign="top" width="77%" headers="mcps1.2.3.1.2 "><p id="p28221413111813"><a name="p28221413111813"></a><a name="p28221413111813"></a>事务的响应时间区间比例。</p>
</td>
</tr>
<tr id="row990364118177"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.3.1.1 "><p id="p1790434151720"><a name="p1790434151720"></a><a name="p1790434151720"></a><span class="keyword" id="keyword169191026135513"><a name="keyword169191026135513"></a><a name="keyword169191026135513"></a>TP最大响应时间</span></p>
</td>
<td class="cellrowborder" valign="top" width="77%" headers="mcps1.2.3.1.2 "><p id="p19361411125612"><a name="p19361411125612"></a><a name="p19361411125612"></a>指在一个时间段内（如10s），统计该请求每次响应所消耗的时间，并将这些时间按从小到大的顺序进行排序，取对应的百分比的那个值作为TPXX的最大响应时间。</p>
<a name="ul9545155910207"></a><a name="ul9545155910207"></a><ul id="ul9545155910207"><li>TP50：指在一个时间段内（如10s），统计该请求每次响应所消耗的时间，并将这些时间按从小到大的顺序进行排序，取第50%的那个值作为TP50的值。</li><li>TP90：指在一个时间段内（如10s），统计该请求每次响应所消耗的时间，并将这些时间按从小到大的顺序进行排序，取第90%的那个值作为TP90的值。</li><li>TP97：指在一个时间段内（如10s），统计该请求每次响应所消耗的时间，并将这些时间按从小到大的顺序进行排序，取第90%的那个值作为TP97的值。</li><li>TP99：指在一个时间段内（如10s），统计该请求每次响应所消耗的时间，并将这些时间按从小到大的顺序进行排序，取第99%的那个值作为TP99的值。</li></ul>
</td>
</tr>
<tr id="row5866174011574"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.3.1.1 "><p id="p12866164015577"><a name="p12866164015577"></a><a name="p12866164015577"></a>测试指标-并发数</p>
</td>
<td class="cellrowborder" valign="top" width="77%" headers="mcps1.2.3.1.2 "><p id="p188661340155719"><a name="p188661340155719"></a><a name="p188661340155719"></a>记录压测任务运行时，当前并发操作的虚拟用户数的变化。</p>
</td>
</tr>
<tr id="row44611857376"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.3.1.1 "><p id="p746213593718"><a name="p746213593718"></a><a name="p746213593718"></a>监控指标</p>
</td>
<td class="cellrowborder" valign="top" width="77%" headers="mcps1.2.3.1.2 "><p id="p15901927153819"><a name="p15901927153819"></a><a name="p15901927153819"></a>概览：监控信息概览，如CPU使用率、内存使用率、磁盘读取速度、磁盘写入速度。</p>
<p id="p208501343155714"><a name="p208501343155714"></a><a name="p208501343155714"></a>CPU（%）：该指标用于统计测试对象的CPU使用率。</p>
<p id="p14851164313570"><a name="p14851164313570"></a><a name="p14851164313570"></a>内存（G）：该指标用于统计测试对象的内存利用率。</p>
<p id="p7851743175716"><a name="p7851743175716"></a><a name="p7851743175716"></a>磁盘读取（KB/S）：该指标用于统计每秒从测试对象读出的数据量。</p>
<p id="p9851124318572"><a name="p9851124318572"></a><a name="p9851124318572"></a>磁盘写入（KB/S）：该指标用于统计每秒写到测试对象的数据量。</p>
<p id="p34629513378"><a name="p34629513378"></a><a name="p34629513378"></a>JVM监控：展示基于Java应用的JVM运行环境的内存和线程指标，您可以实时监控指标趋势进行性能分析。</p>
</td>
</tr>
<tr id="row22418923718"><td class="cellrowborder" valign="top" width="23%" headers="mcps1.2.3.1.1 "><p id="p1424159113716"><a name="p1424159113716"></a><a name="p1424159113716"></a>调用分析</p>
</td>
<td class="cellrowborder" valign="top" width="77%" headers="mcps1.2.3.1.2 "><p id="p0242953711"><a name="p0242953711"></a><a name="p0242953711"></a>失败调用链：应用调用失败信息，只有在调用失败时候显示，单击“查看调用关系”，以弹窗形式显示调用关系。显示最近600条（单个应用展示最近50条）。</p>
<p id="p6719349423"><a name="p6719349423"></a><a name="p6719349423"></a>拓扑关系：拓扑关系是调用关系的一种，用于应用间的调用成功率及响应时间分析，可查看应用之间的关系、调用次数、延时情况。</p>
</td>
</tr>
</tbody>
</table>

## 查看实时测试报告<a name="section13755714302"></a>

压测过程中，可以通过实时报告查看压测过程中各项指标的监控数据。

**前提条件**

测试任务已启动。

**操作步骤**

1.  登录CPTS控制台，在左侧导航栏中选择“JMeter测试工程“，单击待操作工程后的“编辑测试计划“或“更多 \> 查看实时报告“。
2.  在“实时报告”页签下选择需要查看测试报告的测试计划。

    单击“停止任务”，可以停止实时报告测试计划。

3.  选择测试计划下的线程组，查看报告。详细参数说明请参考[表1](#table7900194111711)。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >-   默认显示第一个线程组的报告，若下拉框中未选中线程组，则显示全部线程组的报告。  
    >-   您可以复选框选择该测试计划下的多个线程组，查看多个线程组的报告。  
    >-   您可以在“各项测试指标“下线程组名称前下拉选择该测试计划下线程组的一个或多个报文，查看报文的性能指标。  

4.  您可以查看各项指标TPS、带宽、响应时间区间比例、TP最大响应时间以及并发数等的数据。
5.  您还可以查看该测试计划的监控指标、并对该测试计划进行调用分析。详细参数说明请参考[表1](#table7900194111711)。
    -   **监控指标：**支持监控CPU、内存、磁盘读取、磁盘写入指标。
    -   **调用分析：**支持失败调用链、拓扑关系分析的功能，用于定位测试过程中的问题。


## 查看离线测试报告<a name="section1734510481401"></a>

压测结束后，系统会生成离线测试结果报告。

**前提条件**

测试任务已结束。

**操作步骤**

1.  登录CPTS控制台，在左侧导航栏中选择“JMeter测试工程“，单击待操作工程后的“编辑测试计划“或“更多 \> 查看离线报告“。
2.  在“离线报告”页签下，选择需要查看报告的测试计划。
3.  （可选）单击报告名称前的![](figures/icon-pull-down.png)，您可以查看到测试计划定义和线程组定义。
4.  单击需要查看报告后的“查看报告”，下拉框选择线程组，查看测试报告结果。详细参数说明请参考[表1](#table7900194111711)。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >-   默认显示第一个线程组的报告，若下拉框中未选中线程组，则显示全部线程组的报告。  
    >-   您可以复选框选择该测试计划下的多个线程组，查看多个线程组的报告。  
    >-   您可以在“各项测试指标“下线程组名称前下拉选择该测试计划下线程组的一个或多个报文，查看报文的性能指标。  

5.  您可以查看各项指标TPS、带宽、响应时间区间比例、TP最大响应时间以及并发数等的数据。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >离线报告中的监控数据保存期限为30天，失败调用链、拓扑关系保存期限为7天。  


